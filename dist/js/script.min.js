if(!("contains" in String.prototype)){String.prototype.contains=function(b,a){return -1!==String.prototype.indexOf.call(this,b,a)}}(function(bu,aT){var bc={version:"3.0.3"};var bi=navigator.userAgent.toLowerCase();if(bi.indexOf("windows")>-1||bi.indexOf("win32")>-1){bc.isWindows=true}else{if(bi.indexOf("macintosh")>-1||bi.indexOf("mac os x")>-1){bc.isMac=true}else{if(bi.indexOf("linux")>-1){bc.isLinux=true}}}bc.isIE=bi.indexOf("msie")>-1;bc.isIE6=bi.indexOf("msie 6")>-1;bc.isIE7=bi.indexOf("msie 7")>-1;bc.isGecko=bi.indexOf("gecko")>-1&&bi.indexOf("safari")==-1;bc.isWebKit=bi.indexOf("applewebkit/")>-1;var bP=/#(.+)$/,bL=/^(light|shadow)box\[(.*?)\]/i,bk=/\s*([a-z_]*?)\s*=\s*(.+)\s*/,aY=/[0-9a-z]+$/i,bT=/(.+\/)shadowbox\.js/i;var bz=false,a3=false,aS={},K=0,bb,bB;bc.current=-1;bc.dimensions=null;bc.ease=function(a){return 1+Math.pow(a-1,3)};bc.errorInfo={fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"},wmp:{name:"Windows Media Player",url:"http://www.microsoft.com/windows/windowsmedia/"},f4m:{name:"Flip4Mac",url:"http://www.flip4mac.com/wmv_download.htm"}};bc.gallery=[];bc.onReady=bH;bc.path=null;bc.player=null;bc.playerId="sb-player";bc.options={animate:true,animateFade:true,autoplayMovies:true,continuous:false,enableKeys:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",handleOversize:"resize",handleUnsupported:"link",onChange:bH,onClose:bH,onFinish:bH,onOpen:bH,showMovieControls:true,skipSetup:false,slideshowDelay:0,viewportPadding:20};bc.getCurrent=function(){return bc.current>-1?bc.gallery[bc.current]:null};bc.hasNext=function(){return bc.gallery.length>1&&(bc.current!=bc.gallery.length-1||bc.options.continuous)};bc.isOpen=function(){return bz};bc.isPaused=function(){return bB=="pause"};bc.applyOptions=function(a){aS=bU({},bc.options);bU(bc.options,a)};bc.revertOptions=function(){bU(bc.options,aS)};bc.init=function(c,e){if(a3){return}a3=true;if(bc.skin.options){bU(bc.options,bc.skin.options)}if(c){bU(bc.options,c)}if(!bc.path){var f,d=document.getElementsByTagName("script");for(var a=0,b=d.length;a<b;++a){f=bT.exec(d[a].src);if(f){bc.path=f[1];break}}}if(e){bc.onReady=e}bd()};bc.open=function(b){if(bz){return}var a=bc.makeGallery(b);bc.gallery=a[0];bc.current=a[1];b=bc.getCurrent();if(b==null){return}bc.applyOptions(b.options||{});bn();if(bc.gallery.length){b=bc.getCurrent();if(bc.options.onOpen(b)===false){return}bz=true;bc.skin.onOpen(b,a1)}};bc.close=function(){if(!bz){return}bz=false;if(bc.player){bc.player.remove();bc.player=null}if(typeof bB=="number"){clearTimeout(bB);bB=null}K=0;bA(false);bc.options.onClose(bc.getCurrent());bc.skin.onClose();bc.revertOptions()};bc.play=function(){if(!bc.hasNext()){return}if(!K){K=bc.options.slideshowDelay*1000}if(K){bb=bq();bB=setTimeout(function(){K=bb=0;bc.next()},K);if(bc.skin.onPlay){bc.skin.onPlay()}}};bc.pause=function(){if(typeof bB!="number"){return}K=Math.max(0,K-(bq()-bb));if(K){clearTimeout(bB);bB="pause";if(bc.skin.onPause){bc.skin.onPause()}}};bc.change=function(a){if(!(a in bc.gallery)){if(bc.options.continuous){a=(a<0?bc.gallery.length+a:0);if(!(a in bc.gallery)){return}}else{return}}bc.current=a;if(typeof bB=="number"){clearTimeout(bB);bB=null;K=bb=0}bc.options.onChange(bc.getCurrent());a1(true)};bc.next=function(){bc.change(bc.current+1)};bc.previous=function(){bc.change(bc.current-1)};bc.setDimensions=function(f,a,h,g,b,i,k,n){var l=f,c=a;var m=2*k+b;if(f+m>h){f=h-m}var d=2*k+i;if(a+d>g){a=g-d}var e=(l-f)/l,j=(c-a)/c,o=(e>0||j>0);if(n&&o){if(e>j){a=Math.round((c/l)*f)}else{if(j>e){f=Math.round((l/c)*a)}}}bc.dimensions={height:f+b,width:a+i,innerHeight:f,innerWidth:a,top:Math.floor((h-(f+m))/2+k),left:Math.floor((g-(a+d))/2+k),oversized:o};return bc.dimensions};bc.makeGallery=function(f){var c=[],a=-1;if(typeof f=="string"){f=[f]}if(typeof f.length=="number"){bR(f,function(h,g){if(g.content){c[h]=g}else{c[h]={content:g}}});a=0}else{if(f.tagName){var d=bc.getCache(f);f=d?d:bc.makeObject(f)}if(f.gallery){c=[];var e;for(var b in bc.cache){e=bc.cache[b];if(e.gallery&&e.gallery==f.gallery){if(a==-1&&e.content==f.content){a=c.length}c.push(e)}}if(a==-1){c.unshift(f);a=0}}else{c=[f];a=0}}bR(c,function(h,g){c[h]=bU({},g)});return[c,a]};bc.makeObject=function(a,c){var e={content:a.href,title:a.getAttribute("title")||"",link:a};if(c){c=bU({},c);bR(["player","title","height","width","gallery"],function(g,f){if(typeof c[f]!="undefined"){e[f]=c[f];delete c[f]}});e.options=c}else{e.options={}}if(!e.player){e.player=bc.getPlayer(e.content)}var b=a.getAttribute("rel");if(b){var d=b.match(bL);if(d){e.gallery=escape(d[2])}bR(b.split(";"),function(g,f){d=f.match(bk);if(d){e[d[1]]=d[2]}})}return e};bc.getPlayer=function(c){if(c.indexOf("#")>-1&&c.indexOf(document.location.href)==0){return"inline"}var a=c.indexOf("?");if(a>-1){c=c.substring(0,a)}var d,b=c.match(aY);if(b){d=b[0].toLowerCase()}if(d){if(bc.img&&bc.img.ext.indexOf(d)>-1){return"img"}if(bc.swf&&bc.swf.ext.indexOf(d)>-1){return"swf"}if(bc.flv&&bc.flv.ext.indexOf(d)>-1){return"flv"}if(bc.qt&&bc.qt.ext.indexOf(d)>-1){if(bc.wmp&&bc.wmp.ext.indexOf(d)>-1){return"qtwmp"}else{return"qt"}}if(bc.wmp&&bc.wmp.ext.indexOf(d)>-1){return"wmp"}}return"iframe"};function bn(){var c=bc.errorInfo,b=bc.plugins,k,j,g,d,h,e,i,f;for(var a=0;a<bc.gallery.length;++a){k=bc.gallery[a];j=false;g=null;switch(k.player){case"flv":case"swf":if(!b.fla){g="fla"}break;case"qt":if(!b.qt){g="qt"}break;case"wmp":if(bc.isMac){if(b.qt&&b.f4m){k.player="qt"}else{g="qtf4m"}}else{if(!b.wmp){g="wmp"}}break;case"qtwmp":if(b.qt){k.player="qt"}else{if(b.wmp){k.player="wmp"}else{g="qtwmp"}}break}if(g){if(bc.options.handleUnsupported=="link"){switch(g){case"qtf4m":h="shared";e=[c.qt.url,c.qt.name,c.f4m.url,c.f4m.name];break;case"qtwmp":h="either";e=[c.qt.url,c.qt.name,c.wmp.url,c.wmp.name];break;default:h="single";e=[c[g].url,c[g].name]}k.player="html";k.content='<div class="sb-message">'+aL(bc.lang.errors[h],e)+"</div>"}else{j=true}}else{if(k.player=="inline"){d=bP.exec(k.content);if(d){i=bN(d[1]);if(i){k.content=i.innerHTML}else{j=true}}else{j=true}}else{if(k.player=="swf"||k.player=="flv"){f=(k.options&&k.options.flashVersion)||bc.options.flashVersion;if(bc.flash&&!bc.flash.hasFlashPlayerVersion(f)){k.width=310;k.height=177}}}}if(j){bc.gallery.splice(a,1);if(a<bc.current){--bc.current}else{if(a==bc.current){bc.current=a>0?a-1:a}}--a}}}function bA(a){if(!bc.options.enableKeys){return}(a?bp:bg)(document,"keydown",bD)}function bD(b){if(b.metaKey||b.shiftKey||b.altKey||b.ctrlKey){return}var c=aI(b),a;switch(c){case 81:case 88:case 27:a=bc.close;break;case 37:a=bc.previous;break;case 39:a=bc.next;break;case 32:a=typeof bB=="number"?bc.pause:bc.play;break}if(a){aQ(b);a()}}function a1(e){bA(false);var f=bc.getCurrent();var c=(f.player=="inline"?"html":f.player);if(typeof bc[c]!="function"){throw"unknown player "+c}if(e){bc.player.remove();bc.revertOptions();bc.applyOptions(f.options||{})}bc.player=new bc[c](f,bc.playerId);if(bc.gallery.length>1){var a=bc.gallery[bc.current+1]||bc.gallery[0];if(a.player=="img"){var d=new Image();d.src=a.content}var g=bc.gallery[bc.current-1]||bc.gallery[bc.gallery.length-1];if(g.player=="img"){var b=new Image();b.src=g.content}}bc.skin.onLoad(e,a7)}function a7(){if(!bz){return}if(typeof bc.player.ready!="undefined"){var a=setInterval(function(){if(bz){if(bc.player.ready){clearInterval(a);a=null;bc.skin.onReady(aZ)}}else{clearInterval(a);a=null}},10)}else{bc.skin.onReady(aZ)}}function aZ(){if(!bz){return}bc.player.append(bc.skin.body,bc.dimensions);bc.skin.onShow(bj)}function bj(){if(!bz){return}if(bc.player.onLoad){bc.player.onLoad()}bc.options.onFinish(bc.getCurrent());if(!bc.isPaused()){bc.play()}bA(true)}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,b){var a=this.length>>>0;b=b||0;if(b<0){b+=a}for(;b<a;++b){if(b in this&&this[b]===c){return b}}return -1}}function bq(){return(new Date).getTime()}function bU(b,a){for(var c in a){b[c]=a[c]}return b}function bR(a,e){var d=0,c=a.length;for(var b=a[0];d<c&&e.call(b,d,b)!==false;b=a[++d]){}}function aL(b,a){return b.replace(/\{(\w+?)\}/g,function(d,c){return a[c]})}function bH(){}function bN(a){return document.getElementById(a)}function bv(a){a.parentNode.removeChild(a)}var aW=true,aG=true;function a0(){var a=document.body,b=document.createElement("div");aW=typeof b.style.opacity==="string";b.style.position="fixed";b.style.margin=0;b.style.top="20px";a.appendChild(b,a.firstChild);aG=b.offsetTop==20;a.removeChild(b)}bc.getStyle=(function(){var a=/opacity=([^)]*)/,b=document.defaultView&&document.defaultView.getComputedStyle;return function(e,f){var c;if(!aW&&f=="opacity"&&e.currentStyle){c=a.test(e.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return c===""?"1":c}if(b){var d=b(e,null);if(d){c=d[f]}if(f=="opacity"&&c==""){c="1"}}else{c=e.currentStyle[f]}return c}})();bc.appendHTML=function(c,d){if(c.insertAdjacentHTML){c.insertAdjacentHTML("BeforeEnd",d)}else{if(c.lastChild){var b=c.ownerDocument.createRange();b.setStartAfter(c.lastChild);var a=b.createContextualFragment(d);c.appendChild(a)}else{c.innerHTML=d}}};bc.getWindowSize=function(a){if(document.compatMode==="CSS1Compat"){return document.documentElement["client"+a]}return document.body["client"+a]};bc.setOpacity=function(b,a){var c=b.style;if(aW){c.opacity=(a==1?"":a)}else{c.zoom=1;if(a==1){if(typeof c.filter=="string"&&(/alpha/i).test(c.filter)){c.filter=c.filter.replace(/\s*[\w\.]*alpha\([^\)]*\);?/gi,"")}}else{c.filter=(c.filter||"").replace(/\s*[\w\.]*alpha\([^\)]*\)/gi,"")+" alpha(opacity="+(a*100)+")"}}};bc.clearOpacity=function(a){bc.setOpacity(a,1)};function aP(a){return a.target}function a8(a){return[a.pageX,a.pageY]}function aQ(a){a.preventDefault()}function aI(a){return a.keyCode}function bp(b,c,a){jQuery(b).bind(c,a)}function bg(b,c,a){jQuery(b).unbind(c,a)}jQuery.fn.shadowbox=function(a){return this.each(function(){var c=jQuery(this);var b=jQuery.extend({},a||{},jQuery.metadata?c.metadata():jQuery.meta?c.data():{});var d=this.className||"";b.width=parseInt((d.match(/w:(\d+)/)||[])[1])||b.width;b.height=parseInt((d.match(/h:(\d+)/)||[])[1])||b.height;Shadowbox.setup(c,b)})};var S=false,bF;if(document.addEventListener){bF=function(){document.removeEventListener("DOMContentLoaded",bF,false);bc.load()}}else{if(document.attachEvent){bF=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",bF);bc.load()}}}}function aX(){if(S){return}try{document.documentElement.doScroll("left")}catch(a){setTimeout(aX,1);return}bc.load()}function bd(){if(document.readyState==="complete"){return bc.load()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",bF,false);bu.addEventListener("load",bc.load,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",bF);bu.attachEvent("onload",bc.load);var a=false;try{a=bu.frameElement===null}catch(b){}if(document.documentElement.doScroll&&a){aX()}}}}bc.load=function(){if(S){return}if(!document.body){return setTimeout(bc.load,13)}S=true;a0();bc.onReady();if(!bc.options.skipSetup){bc.setup()}bc.skin.init()};bc.plugins={};if(navigator.plugins&&navigator.plugins.length){var aH=[];bR(navigator.plugins,function(a,b){aH.push(b.name)});aH=aH.join(",");var bI=aH.indexOf("Flip4Mac")>-1;bc.plugins={fla:aH.indexOf("Shockwave Flash")>-1,qt:aH.indexOf("QuickTime")>-1,wmp:!bI&&aH.indexOf("Windows Media")>-1,f4m:bI}}else{var aO=function(b){var c;try{c=new ActiveXObject(b)}catch(a){}return !!c};bc.plugins={fla:aO("ShockwaveFlash.ShockwaveFlash"),qt:aO("QuickTime.QuickTime"),wmp:aO("wmplayer.ocx"),f4m:false}}var a6=/^(light|shadow)box/i,bE="shadowboxCacheKey",a2=1;bc.cache={};bc.select=function(d){var c=[];if(!d){var b;bR(document.getElementsByTagName("a"),function(g,f){b=f.getAttribute("rel");if(b&&a6.test(b)){c.push(f)}})}else{var e=d.length;if(e){if(typeof d=="string"){if(bc.find){c=bc.find(d)}}else{if(e==2&&typeof d[0]=="string"&&d[1].nodeType){if(bc.find){c=bc.find(d[0],d[1])}}else{for(var a=0;a<e;++a){c[a]=d[a]}}}}else{c.push(d)}}return c};bc.setup=function(a,b){bR(bc.select(a),function(d,c){bc.addCache(c,b)})};bc.teardown=function(a){bR(bc.select(a),function(c,b){bc.removeCache(b)})};bc.addCache=function(b,a){var c=b[bE];if(c==aT){c=a2++;b[bE]=c;bp(b,"click",aJ)}bc.cache[c]=bc.makeObject(b,a)};bc.removeCache=function(a){bg(a,"click",aJ);delete bc.cache[a[bE]];a[bE]=null};bc.getCache=function(b){var a=b[bE];return(a in bc.cache&&bc.cache[a])};bc.clearCache=function(){for(var a in bc.cache){bc.removeCache(bc.cache[a].link)}bc.cache={}};function aJ(a){bc.open(this);if(bc.gallery.length){aQ(a)}}bc.lang={code:"en",of:"of",loading:"loading",cancel:"Cancel",next:"Next",previous:"Previous",play:"Play",pause:"Pause",close:"Close",errors:{single:'You must install the <a href="{0}">{1}</a> browser plugin to view this content.',shared:'You must install both the <a href="{0}">{1}</a> and <a href="{2}">{3}</a> browser plugins to view this content.',either:'You must install either the <a href="{0}">{1}</a> or the <a href="{2}">{3}</a> browser plugin to view this content.'}};var bt,bw="sb-drag-proxy",bs,aU,bK;function bo(){bs={x:0,y:0,startX:null,startY:null}}function bW(){var a=bc.dimensions;bU(aU.style,{height:a.innerHeight+"px",width:a.innerWidth+"px"})}function be(){bo();var a=["position:absolute","cursor:"+(bc.isGecko?"-moz-grab":"move"),"background-color:"+(bc.isIE?"#fff;filter:alpha(opacity=0)":"transparent")].join(";");bc.appendHTML(bc.skin.body,'<div id="'+bw+'" style="'+a+'"></div>');aU=bN(bw);bW();bp(aU,"mousedown",bh)}function bx(){if(aU){bg(aU,"mousedown",bh);bv(aU);aU=null}bK=null}function bh(b){aQ(b);var a=a8(b);bs.startX=a[0];bs.startY=a[1];bK=bN(bc.player.id);bp(document,"mousemove",bm);bp(document,"mouseup",aV);if(bc.isGecko){aU.style.cursor="-moz-grabbing"}}function bm(f){var c=bc.player,e=bc.dimensions,a=a8(f);var b=a[0]-bs.startX;bs.startX+=b;bs.x=Math.max(Math.min(0,bs.x+b),e.innerWidth-c.width);var d=a[1]-bs.startY;bs.startY+=d;bs.y=Math.max(Math.min(0,bs.y+d),e.innerHeight-c.height);bU(bK.style,{left:bs.x+"px",top:bs.y+"px"})}function aV(){bg(document,"mousemove",bm);bg(document,"mouseup",aV);if(bc.isGecko){aU.style.cursor="-moz-grab"}}bc.img=function(c,b){this.obj=c;this.id=b;this.ready=false;var a=this;bt=new Image();bt.onload=function(){a.height=c.height?parseInt(c.height,10):bt.height;a.width=c.width?parseInt(c.width,10):bt.width;a.ready=true;bt.onload=null;bt=null};bt.src=c.content};bc.img.ext=["bmp","gif","jpg","jpeg","png"];bc.img.prototype={append:function(d,e){var c=document.createElement("img");c.id=this.id;c.src=this.obj.content;c.style.position="absolute";var b,a;if(e.oversized&&bc.options.handleOversize=="resize"){b=e.innerHeight;a=e.innerWidth}else{b=this.height;a=this.width}c.setAttribute("height",b);c.setAttribute("width",a);d.appendChild(c)},remove:function(){var a=bN(this.id);if(a){bv(a)}bx();if(bt){bt.onload=null;bt=null}},onLoad:function(){var a=bc.dimensions;if(a.oversized&&bc.options.handleOversize=="drag"){be()}},onWindowResize:function(){var a=bc.dimensions;switch(bc.options.handleOversize){case"resize":var c=bN(this.id);c.height=a.innerHeight;c.width=a.innerWidth;break;case"drag":if(bK){var b=parseInt(bc.getStyle(bK,"top")),d=parseInt(bc.getStyle(bK,"left"));if(b+this.height<a.innerHeight){bK.style.top=a.innerHeight-this.height+"px"}if(d+this.width<a.innerWidth){bK.style.left=a.innerWidth-this.width+"px"}bW()}break}}};var bC=false,a5=[],aN=["sb-nav-close","sb-nav-next","sb-nav-play","sb-nav-pause","sb-nav-previous"],bQ,bM,a4,aR=true;function bf(d,g,k,m,f){var h=(g=="opacity"),l=h?bc.setOpacity:function(o,p){o.style[g]=""+p+"px"};if(m==0||(!h&&!bc.options.animate)||(h&&!bc.options.animateFade)){l(d,k);if(f){f()}return}var j=parseFloat(bc.getStyle(d,g))||0;var i=k-j;if(i==0){if(f){f()}return}m*=1000;var c=bq(),n=bc.ease,a=c+m,b;var e=setInterval(function(){b=bq();if(b>=a){clearInterval(e);e=null;l(d,k);if(f){f()}}else{l(d,j+n((b-c)/m)*i)}},10)}function bV(){bQ.style.height=bc.getWindowSize("Height")+"px";bQ.style.width=bc.getWindowSize("Width")+"px"}function bS(){bQ.style.top=document.documentElement.scrollTop+"px";bQ.style.left=document.documentElement.scrollLeft+"px"}function bl(a){if(a){bR(a5,function(c,b){b[0].style.visibility=b[1]||""})}else{a5=[];bR(bc.options.troubleElements,function(b,c){bR(document.getElementsByTagName(c),function(d,e){a5.push([e,e.style.visibility]);e.style.visibility="hidden"})})}}function aM(b,a){var c=bN("sb-nav-"+b);if(c){c.style.display=a?"":"none"}}function bJ(c,e){var f=bN("sb-loading"),b=bc.getCurrent().player,a=(b=="img"||b=="html");if(c){bc.setOpacity(f,0);f.style.display="block";var d=function(){bc.clearOpacity(f);if(e){e()}};if(a){bf(f,"opacity",1,bc.options.fadeDuration,d)}else{d()}}else{var d=function(){f.style.display="none";bc.clearOpacity(f);if(e){e()}};if(a){bf(f,"opacity",0,bc.options.fadeDuration,d)}else{d()}}}function aK(i){var a=bc.getCurrent();bN("sb-title-inner").innerHTML=a.title||"";var h,l,e,g,k;if(bc.options.displayNav){h=true;var j=bc.gallery.length;if(j>1){if(bc.options.continuous){l=k=true}else{l=(j-1)>bc.current;k=bc.current>0}}if(bc.options.slideshowDelay>0&&bc.hasNext()){g=!bc.isPaused();e=!g}}else{h=l=e=g=k=false}aM("close",h);aM("next",l);aM("play",e);aM("pause",g);aM("previous",k);var f="";if(bc.options.displayCounter&&bc.gallery.length>1){var j=bc.gallery.length;if(bc.options.counterType=="skip"){var b=0,c=j,d=parseInt(bc.options.counterLimit)||0;if(d<j&&d>2){var m=Math.floor(d/2);b=bc.current-m;if(b<0){b+=j}c=bc.current+(d-m);if(c>j){c-=j}}while(b!=c){if(b==j){b=0}f+='<a onclick="Shadowbox.change('+b+');"';if(b==bc.current){f+=' class="sb-counter-current"'}f+=">"+(++b)+"</a>"}}else{f=[bc.current+1,bc.lang.of,j].join(" ")}}bN("sb-counter").innerHTML=f;i()}function a9(a){var c=bN("sb-title-inner"),b=bN("sb-info-inner"),d=0.35;c.style.visibility=b.style.visibility="";if(c.innerHTML!=""){bf(c,"marginTop",0,d)}bf(b,"marginTop",0,d,a)}function br(d,g){var i=bN("sb-title"),f=bN("sb-info"),c=i.offsetHeight,b=f.offsetHeight,a=bN("sb-title-inner"),h=bN("sb-info-inner"),e=(d?0.35:0);bf(a,"marginTop",c,e);bf(h,"marginTop",b*-1,e,function(){a.style.visibility=h.style.visibility="hidden";g()})}function bO(c,a,d,e){var f=bN("sb-wrapper-inner"),b=(d?bc.options.resizeDuration:0);bf(a4,"top",a,b);bf(f,"height",c,b,e)}function by(c,a,d,e){var b=(d?bc.options.resizeDuration:0);bf(a4,"left",a,b);bf(a4,"width",c,b,e)}function bG(g,d){var b=bN("sb-body-inner"),g=parseInt(g),d=parseInt(d),e=a4.offsetHeight-b.offsetHeight,f=a4.offsetWidth-b.offsetWidth,i=bM.offsetHeight,h=bM.offsetWidth,a=parseInt(bc.options.viewportPadding)||20,c=(bc.player&&bc.options.handleOversize!="drag");return bc.setDimensions(g,d,i,h,e,f,a,c)}var ba={};ba.markup='<div id="sb-container"><div id="sb-overlay"></div><div id="sb-wrapper"><div id="sb-title"><div id="sb-title-inner"></div></div><div id="sb-wrapper-inner"><div id="sb-body"><div id="sb-body-inner"></div><div id="sb-loading"><div id="sb-loading-inner"><span>{loading}</span></div></div></div></div><div id="sb-info"><div id="sb-info-inner"><div id="sb-counter"></div><div id="sb-nav"><a id="sb-nav-close" title="{close}" onclick="Shadowbox.close()"></a><a id="sb-nav-next" title="{next}" onclick="Shadowbox.next()"></a><a id="sb-nav-play" title="{play}" onclick="Shadowbox.play()"></a><a id="sb-nav-pause" title="{pause}" onclick="Shadowbox.pause()"></a><a id="sb-nav-previous" title="{previous}" onclick="Shadowbox.previous()"></a></div></div></div></div></div>';ba.options={animSequence:"sync",counterLimit:10,counterType:"default",displayCounter:true,displayNav:true,fadeDuration:0.35,initialHeight:160,initialWidth:320,modal:false,overlayColor:"#000",overlayOpacity:0.5,resizeDuration:0.35,showOverlay:true,troubleElements:["select","object","embed","canvas"]};ba.init=function(){bc.appendHTML(document.body,aL(ba.markup,bc.lang));ba.body=bN("sb-body-inner");bQ=bN("sb-container");bM=bN("sb-overlay");a4=bN("sb-wrapper");if(!aG){bQ.style.position="absolute"}if(!aW){var c,b,d=/url\("(.*\.png)"\)/;bR(aN,function(f,e){c=bN(e);if(c){b=bc.getStyle(c,"backgroundImage").match(d);if(b){c.style.backgroundImage="none";c.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+b[1]+",sizingMethod=scale);"}}})}var a;bp(bu,"resize",function(){if(a){clearTimeout(a);a=null}if(bz){a=setTimeout(ba.onWindowResize,10)}})};ba.onOpen=function(b,a){aR=false;bQ.style.display="block";bV();var c=bG(bc.options.initialHeight,bc.options.initialWidth);bO(c.innerHeight,c.top);by(c.width,c.left);if(bc.options.showOverlay){bM.style.backgroundColor=bc.options.overlayColor;bc.setOpacity(bM,0);if(!bc.options.modal){bp(bM,"click",bc.close)}bC=true}if(!aG){bS();bp(bu,"scroll",bS)}bl();bQ.style.visibility="visible";if(bC){bf(bM,"opacity",bc.options.overlayOpacity,bc.options.fadeDuration,a)}else{a()}};ba.onLoad=function(b,a){bJ(true);while(ba.body.firstChild){bv(ba.body.firstChild)}br(b,function(){if(!bz){return}if(!b){a4.style.visibility="visible"}aK(a)})};ba.onReady=function(a){if(!bz){return}var d=bc.player,c=bG(d.height,d.width);var b=function(){a9(a)};switch(bc.options.animSequence){case"hw":bO(c.innerHeight,c.top,true,function(){by(c.width,c.left,true,b)});break;case"wh":by(c.width,c.left,true,function(){bO(c.innerHeight,c.top,true,b)});break;default:by(c.width,c.left,true);bO(c.innerHeight,c.top,true,b)}};ba.onShow=function(a){bJ(false,a);aR=true};ba.onClose=function(){if(!aG){bg(bu,"scroll",bS)}bg(bM,"click",bc.close);a4.style.visibility="hidden";var a=function(){bQ.style.visibility="hidden";bQ.style.display="none";bl(true)};if(bC){bf(bM,"opacity",0,bc.options.fadeDuration,a)}else{a()}};ba.onPlay=function(){aM("play",false);aM("pause",true)};ba.onPause=function(){aM("pause",false);aM("play",true)};ba.onWindowResize=function(){if(!aR){return}bV();var a=bc.player,b=bG(a.height,a.width);by(b.width,b.left);bO(b.innerHeight,b.top);if(a.onWindowResize){a.onWindowResize()}};bc.skin=ba;bu.Shadowbox=bc})(window);
/*!
 * Shadowbox.js, version @VERSION
 * http://shadowbox-js.com/
 *
 * Copyright 2007-2010, Michael J. I. Jackson
 * @DATE
 */
(function(ao,j){var M={version:"3.0.3"};Array.prototype.contains=Array.prototype.contains||function(S){for(var K=0;K<this.length;++K){if(this[K]===S){return true}}return false};var aa=/^(light|shadow)box\[(.*?)\]/i,au=/\s*([a-z_]*?)\s*=\s*(.+)\s*/,e=/[0-9a-z]+$/i,ay=/(.+\/)shadowbox\.js/i,al=document.documentElement,x=false,a=false,k={},w=0,N,aj,g="opacity" in al.style&&typeof al.style.opacity==="string",u=false;(function(){var K=document.createElement("div");K.style.position="fixed";K.style.margin=0;K.style.top="20px";al.appendChild(K,al.firstChild);u=K.offsetTop==20;al.removeChild(K)})();M.current=-1;M.dimensions=null;M.ease=function(K){return 1+Math.pow(K-1,3)};M.errorInfo={fla:{name:"Flash",url:"http://www.adobe.com/products/flashplayer/"},qt:{name:"QuickTime",url:"http://www.apple.com/quicktime/download/"}};M.gallery=[];M.onReady=ad;M.path=null;M.player=null;M.playerId="sb-player";M.options={animate:true,animateFade:true,autoplayMovies:true,continuous:false,enableKeys:true,flashParams:{bgcolor:"#000000",allowfullscreen:true},flashVars:{},flashVersion:"9.0.115",handleOversize:"resize",handleUnsupported:"link",onChange:ad,onClose:ad,onFinish:ad,onOpen:ad,showMovieControls:true,skipSetup:false,slideshowDelay:0,viewportPadding:20};M.getCurrent=function(){return M.current>-1?M.gallery[M.current]:null};M.hasNext=function(){return M.gallery.length>1&&(M.current!=M.gallery.length-1||M.options.continuous)};M.isOpen=function(){return x};M.isPaused=function(){return aj=="pause"};M.applyOptions=function(K){k=ax({},M.options);ax(M.options,K)};M.revertOptions=function(){ax(M.options,k)};M.init=function(aB,aE){if(a){return}a=true;if(M.skin.options){ax(M.options,M.skin.options)}if(aB){ax(M.options,aB)}if(!M.path){var aD,S=document.getElementsByTagName("script");for(var aC=0,K=S.length;aC<K;++aC){aD=ay.exec(S[aC].src);if(aD){M.path=aD[1];break}}}if(aE){M.onReady=aE}L()};M.open=function(S){if(x){return}var K=M.makeGallery(S);M.gallery=K[0];M.current=K[1];S=M.getCurrent();if(S==null){return}M.applyOptions(S.options||{});D();if(M.gallery.length){S=M.getCurrent();if(M.options.onOpen(S)===false){return}x=true;M.skin.onOpen(S,c)}};M.close=function(){if(!x){return}x=false;if(M.player){M.player.remove();M.player=null}if(typeof aj=="number"){clearTimeout(aj);aj=null}w=0;ak(false);M.options.onClose(M.getCurrent());M.skin.onClose();M.revertOptions()};M.play=function(){if(!M.hasNext()){return}if(!w){w=M.options.slideshowDelay*1000}if(w){N=aq();aj=setTimeout(function(){w=N=0;M.next()},w);if(M.skin.onPlay){M.skin.onPlay()}}};M.pause=function(){if(typeof aj!="number"){return}w=Math.max(0,w-(aq()-N));if(w){clearTimeout(aj);aj="pause";if(M.skin.onPause){M.skin.onPause()}}};M.change=function(K){if(!(K in M.gallery)){if(M.options.continuous){K=(K<0?M.gallery.length+K:0);if(!(K in M.gallery)){return}}else{return}}M.current=K;if(typeof aj=="number"){clearTimeout(aj);aj=null;w=N=0}M.options.onChange(M.getCurrent());c(true)};M.next=function(){M.change(M.current+1)};M.previous=function(){M.change(M.current-1)};M.setDimensions=function(aN,aE,aL,aM,aD,K,aJ,aG){var aI=aN,aC=aE;var aH=2*aJ+aD;if(aN+aH>aL){aN=aL-aH}var aB=2*aJ+K;if(aE+aB>aM){aE=aM-aB}var S=(aI-aN)/aI,aK=(aC-aE)/aC,aF=(S>0||aK>0);if(aG&&aF){if(S>aK){aE=Math.round((aC/aI)*aN)}else{if(aK>S){aN=Math.round((aI/aC)*aE)}}}M.dimensions={height:aN+aD,width:aE+K,innerHeight:aN,innerWidth:aE,top:Math.floor((aL-(aN+aH))/2+aJ),left:Math.floor((aM-(aE+aB))/2+aJ),oversized:aF};return M.dimensions};M.makeGallery=function(aD){var K=[],aC=-1;if(typeof aD=="string"){aD=[aD]}if(typeof aD.length=="number"){aA(aD,function(aF,aG){if(aG.content){K[aF]=aG}else{K[aF]={content:aG}}});aC=0}else{if(aD.tagName){var S=M.getCache(aD);aD=S?S:M.makeObject(aD)}if(aD.gallery){K=[];var aE;for(var aB in M.cache){aE=M.cache[aB];if(aE.gallery&&aE.gallery==aD.gallery){if(aC==-1&&aE.content==aD.content){aC=K.length}K.push(aE)}}if(aC==-1){K.unshift(aD);aC=0}}else{K=[aD];aC=0}}aA(K,function(aF,aG){K[aF]=ax({},aG)});return[K,aC]};M.makeObject=function(aC,aB){var aD={content:aC.href,title:aC.getAttribute("title")||"",link:aC};if(aB){aB=ax({},aB);aA(["player","title","height","width","gallery"],function(aE,aF){if(typeof aB[aF]!="undefined"){aD[aF]=aB[aF];delete aB[aF]}});aD.options=aB}else{aD.options={}}if(!aD.player){aD.player=M.getPlayer(aD.content)}var K=aC.getAttribute("rel");if(K){var S=K.match(aa);if(S){aD.gallery=escape(S[2])}aA(K.split(";"),function(aE,aF){S=aF.match(au);if(S){aD[S[1]]=S[2]}})}return aD};M.getPlayer=function(aB){var aC=aB.indexOf("?");if(aC>-1){aB=aB.substring(0,aC)}var S,K=aB.match(e);if(K){S=K[0].toLowerCase()}if(S){if(M.img&&M.img.ext.contains(S)){return"img"}if(M.swf&&M.swf.ext.contains(S)){return"swf"}if(M.flv&&M.flv.ext.contains(S)){return"flv"}if(M.qt&&M.qt.ext.contains(S)){return"qt"}}return"iframe"};function D(){var aF=M.errorInfo,aB=M.plugins,aG,S,aE,K,aC;for(var aD=0;aD<M.gallery.length;++aD){aG=M.gallery[aD];S=false;aE=null;switch(aG.player){case"flv":case"swf":if(!aB.fla){aE="fla"}break;case"qt":if(!aB.qt){aE="qt"}break}if(aE){if(M.options.handleUnsupported=="link"){aG.player="html";aG.content='<div class="sb-message">Please download <a href="'+aF[aE].url+'">'+aF[aE].name+"</a> in order to view this content.</div>"}else{S=true}}else{if(aG.player=="swf"||aG.player=="flv"){aC=(aG.options&&aG.options.flashVersion)||M.options.flashVersion;if(M.flash&&!M.flash.hasFlashPlayerVersion(aC)){aG.width=310;aG.height=177}}}if(S){M.gallery.splice(aD,1);if(aD<M.current){--M.current}else{if(aD==M.current){M.current=aD>0?aD-1:aD}}--aD}}}function ak(K){if(!M.options.enableKeys){return}(K?C:H)(document,"keydown",ah)}function ah(S){if(S.metaKey||S.shiftKey||S.altKey||S.ctrlKey){return}var K;switch(S.keyCode){case 81:case 88:case 27:K=M.close;break;case 37:K=M.previous;break;case 39:K=M.next;break;case 32:K=typeof aj=="number"?M.pause:M.play;break}if(K){S.preventDefault();K()}}function c(aF){ak(false);var aE=M.getCurrent(),aB=aE.player;if(typeof M[aB]!=="function"){throw"unknown player "+aB}if(aF){M.player.remove();M.revertOptions();M.applyOptions(aE.options||{})}M.player=new M[aB](aE,M.playerId);if(M.gallery.length>1){var aC=M.gallery[M.current+1]||M.gallery[0];if(aC.player==="img"){var S=new Image();S.src=aC.content}var aD=M.gallery[M.current-1]||M.gallery[M.gallery.length-1];if(aD.player==="img"){var K=new Image();K.src=aD.content}}M.skin.onLoad(aF,R)}function R(){if(!x){return}if(typeof M.player.ready!="undefined"){var K=setInterval(function(){if(x){if(M.player.ready){clearInterval(K);K=null;M.skin.onReady(d)}}else{clearInterval(K);K=null}},10)}else{M.skin.onReady(d)}}function d(){if(!x){return}M.player.append(M.skin.body,M.dimensions);M.skin.onShow(F)}function F(){if(!x){return}if(M.player.onLoad){M.player.onLoad()}M.options.onFinish(M.getCurrent());if(!M.isPaused()){M.play()}ak(true)}function aq(){return(new Date).getTime()}function ax(K,aB){for(var S in aB){K[S]=aB[S]}return K}function aA(aC,aD){var S=0,K=aC.length;for(var aB=aC[0];S<K&&aD.call(aB,S,aB)!==false;aB=aC[++S]){}}function ad(){}function Y(K){return document.getElementById(K)}function z(K){K.parentNode.removeChild(K)}M.getStyle=(function(){var K=/opacity=([^)]*)/,S=document.defaultView&&document.defaultView.getComputedStyle;return function(aE,aD){var aC;if(!g&&aD=="opacity"&&aE.currentStyle){aC=K.test(aE.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return aC===""?"1":aC}if(S){var aB=S(aE,null);if(aB){aC=aB[aD]}if(aD=="opacity"&&aC==""){aC="1"}}else{aC=aE.currentStyle[aD]}return aC}})();M.appendHTML=function(aB,S){if(aB.insertAdjacentHTML){aB.insertAdjacentHTML("BeforeEnd",S)}else{if(aB.lastChild){var K=aB.ownerDocument.createRange();K.setStartAfter(aB.lastChild);var aC=K.createContextualFragment(S);aB.appendChild(aC)}else{aB.innerHTML=S}}};M.getWindowSize=function(K){if(document.compatMode==="CSS1Compat"){return document.documentElement["client"+K]}return document.body["client"+K]};M.setOpacity=function(aB,K){var S=aB.style;if(g){S.opacity=(K==1?"":K)}else{S.zoom=1;if(K==1){if(typeof S.filter=="string"&&(/alpha/i).test(S.filter)){S.filter=S.filter.replace(/\s*[\w\.]*alpha\([^\)]*\);?/gi,"")}}else{S.filter=(S.filter||"").replace(/\s*[\w\.]*alpha\([^\)]*\)/gi,"")+" alpha(opacity="+(K*100)+")"}}};M.clearOpacity=function(K){M.setOpacity(K,1)};function m(S){var K=S.target?S.target:S.srcElement;return K.nodeType==3?K.parentNode:K}function Q(S){var K=S.pageX||(S.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)),aB=S.pageY||(S.clientY+(document.documentElement.scrollTop||document.body.scrollTop));return[K,aB]}function C(aC,aB,S){if(aC.addEventListener){aC.addEventListener(aB,S,false)}else{if(aC.nodeType===3||aC.nodeType===8){return}if(aC.setInterval&&(aC!==ao&&!aC.frameElement)){aC=ao}if(!S.__guid){S.__guid=C.guid++}if(!aC.events){aC.events={}}var K=aC.events[aB];if(!K){K=aC.events[aB]={};if(aC["on"+aB]){K[0]=aC["on"+aB]}}K[S.__guid]=S;aC["on"+aB]=C.handleEvent}}C.guid=1;C.handleEvent=function(aC){var K=true;aC=aC||C.fixEvent(((this.ownerDocument||this.document||this).parentWindow||ao).event);var S=this.events[aC.type];for(var aB in S){this.__handleEvent=S[aB];if(this.__handleEvent(aC)===false){K=false}}return K};C.preventDefault=function(){this.returnValue=false};C.stopPropagation=function(){this.cancelBubble=true};C.fixEvent=function(K){K.preventDefault=C.preventDefault;K.stopPropagation=C.stopPropagation;K.keyCode=K.which;return K};function H(aB,S,K){if(aB.removeEventListener){aB.removeEventListener(S,K,false)}else{if(aB.events&&aB.events[S]){delete aB.events[S][K.__guid]}}}var v=false,af;if(document.addEventListener){af=function(){document.removeEventListener("DOMContentLoaded",af,false);M.load()}}else{if(document.attachEvent){af=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",af);M.load()}}}}function f(){if(v){return}try{document.documentElement.doScroll("left")}catch(K){setTimeout(f,1);return}M.load()}function L(){if(document.readyState==="complete"){return M.load()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",af,false);ao.addEventListener("load",M.load,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",af);ao.attachEvent("onload",M.load);var K=false;try{K=ao.frameElement===null}catch(S){}if(document.documentElement.doScroll&&K){f()}}}}M.load=function(){if(v){return}if(!document.body){return setTimeout(M.load,13)}v=true;M.onReady();if(!M.options.skipSetup){M.setup()}M.skin.init()};M.plugins={};if(navigator.plugins&&navigator.plugins.length){var t=[];aA(navigator.plugins,function(K,S){t.push(S.name)});t=t.join(",");M.plugins={fla:t.contains("Shockwave Flash"),qt:t.contains("QuickTime")}}else{var n=function(K){var S;try{S=new ActiveXObject(K)}catch(aB){}return !!S};M.plugins={fla:n("ShockwaveFlash.ShockwaveFlash"),qt:n("QuickTime.QuickTime")}}var T=/^(light|shadow)box/i,ag="shadowboxCacheKey",b=1;M.cache={};M.select=function(S){var aB=[];if(!S){var K;aA(document.getElementsByTagName("a"),function(aE,aF){K=aF.getAttribute("rel");if(K&&T.test(K)){aB.push(aF)}})}else{var aD=typeof S;if((aD==="object"||aD==="function")&&S.length){for(var aC=0;aC<S.length;++aC){aB[aC]=S[aC]}}else{aB.push(S)}}return aB};M.setup=function(K,S){aA(M.select(K),function(aB,aC){M.addCache(aC,S)})};M.teardown=function(K){aA(M.select(K),function(S,aB){M.removeCache(aB)})};M.addCache=function(aB,K){var S=aB[ag];if(S==j){S=b++;aB[ag]=S;C(aB,"click",r)}M.cache[S]=M.makeObject(aB,K)};M.removeCache=function(K){H(K,"click",r);delete M.cache[K[ag]];K[ag]=null};M.getCache=function(S){var K=S[ag];return(K in M.cache&&M.cache[K])};M.clearCache=function(){for(var K in M.cache){M.removeCache(M.cache[K].link)}M.cache={}};function r(K){M.open(this);if(M.gallery.length){K.preventDefault()}}M.html=function(K,S){this.obj=K;this.id=S;this.height=K.height?parseInt(K.height,10):300;this.width=K.width?parseInt(K.width,10):500};M.html.prototype={append:function(K,S){var aB=document.createElement("div");aB.id=this.id;aB.className="html";aB.innerHTML=this.obj.content;K.appendChild(aB)},remove:function(){var K=Y(this.id);if(K){z(K)}}};M.iframe=function(S,aB){this.obj=S;this.id=aB;var K=Y("sb-overlay");this.height=S.height?parseInt(S.height,10):K.offsetHeight;this.width=S.width?parseInt(S.width,10):K.offsetWidth};M.iframe.prototype={append:function(K,aB){var S='<iframe id="'+this.id+'" name="'+this.id+'" height="100%" width="100%" frameborder="0" marginwidth="0" marginheight="0" style="visibility:hidden" onload="this.style.visibility=\'visible\'" scrolling="auto" allowtransparency="true" src="about:blank"></iframe>';K.innerHTML=S},remove:function(){var K=Y(this.id);if(K){z(K);try{delete ao.frames[this.id]}catch(S){}}},onLoad:function(){var K=ao.frames[this.id];K.location.href=this.obj.content}};var A,an="sb-drag-proxy",B,i,ab;function ar(){B={x:0,y:0,startX:null,startY:null}}function av(){var K=M.dimensions;ax(i.style,{height:K.innerHeight+"px",width:K.innerWidth+"px"})}function J(){ar();var K=["position:absolute","cursor:move","background-color:"+(g?"transparent":"#fff;filter:alpha(opacity=0)")].join(";");M.appendHTML(M.skin.body,'<div id="'+an+'" style="'+K+'"></div>');i=Y(an);av();C(i,"mousedown",G)}function y(){if(i){H(i,"mousedown",G);z(i);i=null}ab=null}function G(S){S.preventDefault();var K=Q(S);B.startX=K[0];B.startY=K[1];ab=Y(M.player.id);C(document,"mousemove",E);C(document,"mouseup",h)}function E(aD){var K=M.player,aE=M.dimensions,aC=Q(aD);var aB=aC[0]-B.startX;B.startX+=aB;B.x=Math.max(Math.min(0,B.x+aB),aE.innerWidth-K.width);var S=aC[1]-B.startY;B.startY+=S;B.y=Math.max(Math.min(0,B.y+S),aE.innerHeight-K.height);ax(ab.style,{left:B.x+"px",top:B.y+"px"})}function h(){H(document,"mousemove",E);H(document,"mouseup",h)}M.img=function(S,aB){this.obj=S;this.id=aB;this.ready=false;var K=this;A=new Image();A.onload=function(){K.height=S.height?parseInt(S.height,10):A.height;K.width=S.width?parseInt(S.width,10):A.width;K.ready=true;A.onload=null;A=null};A.src=S.content};M.img.ext=["bmp","gif","jpg","jpeg","png"];M.img.prototype={append:function(S,aD){var aB=document.createElement("img");aB.id=this.id;aB.src=this.obj.content;aB.style.position="absolute";var K,aC;if(aD.oversized&&M.options.handleOversize=="resize"){K=aD.innerHeight;aC=aD.innerWidth}else{K=this.height;aC=this.width}aB.setAttribute("height",K);aB.setAttribute("width",aC);S.appendChild(aB)},remove:function(){var K=Y(this.id);if(K){z(K)}y();if(A){A.onload=null;A=null}},onLoad:function(){var K=M.dimensions;if(K.oversized&&M.options.handleOversize=="drag"){J()}},onWindowResize:function(){var aC=M.dimensions;switch(M.options.handleOversize){case"resize":var K=Y(this.id);K.height=aC.innerHeight;K.width=aC.innerWidth;break;case"drag":if(ab){var aB=parseInt(M.getStyle(ab,"top")),S=parseInt(M.getStyle(ab,"left"));if(aB+this.height<aC.innerHeight){ab.style.top=aC.innerHeight-this.height+"px"}if(S+this.width<aC.innerWidth){ab.style.left=aC.innerWidth-this.width+"px"}av()}break}}};var ai=false,U=[],o=["sb-nav-close","sb-nav-next","sb-nav-play","sb-nav-pause","sb-nav-previous"],W,Z,V,l=true;function I(aB,aL,aI,aG,aM){var K=(aL=="opacity"),aH=K?M.setOpacity:function(aN,aO){aN.style[aL]=""+aO+"px"};if(aG==0||(!K&&!M.options.animate)||(K&&!M.options.animateFade)){aH(aB,aI);if(aM){aM()}return}var aJ=parseFloat(M.getStyle(aB,aL))||0;var aK=aI-aJ;if(aK==0){if(aM){aM()}return}aG*=1000;var aC=aq(),aF=M.ease,aE=aC+aG,aD;var S=setInterval(function(){aD=aq();if(aD>=aE){clearInterval(S);S=null;aH(aB,aI);if(aM){aM()}}else{aH(aB,aJ+aF((aD-aC)/aG)*aK)}},10)}function aw(){W.style.height=M.getWindowSize("Height")+"px";W.style.width=M.getWindowSize("Width")+"px"}function az(){W.style.top=document.documentElement.scrollTop+"px";W.style.left=document.documentElement.scrollLeft+"px"}function at(K){if(K){aA(U,function(S,aB){aB[0].style.visibility=aB[1]||""})}else{U=[];aA(M.options.troubleElements,function(aB,S){aA(document.getElementsByTagName(S),function(aC,aD){U.push([aD,aD.style.visibility]);aD.style.visibility="hidden"})})}}function p(aB,K){var S=Y("sb-nav-"+aB);if(S){S.style.display=K?"":"none"}}function ac(K,aE){var aD=Y("sb-loading"),aB=M.getCurrent().player,aC=(aB=="img"||aB=="html");if(K){M.setOpacity(aD,0);aD.style.display="block";var S=function(){M.clearOpacity(aD);if(aE){aE()}};if(aC){I(aD,"opacity",1,M.options.fadeDuration,S)}else{S()}}else{var S=function(){aD.style.display="none";M.clearOpacity(aD);if(aE){aE()}};if(aC){I(aD,"opacity",0,M.options.fadeDuration,S)}else{S()}}}function q(aJ){var aE=M.getCurrent();Y("sb-title-inner").innerHTML=aE.title||"";var aK,aG,S,aL,aH;if(M.options.displayNav){aK=true;var aI=M.gallery.length;if(aI>1){if(M.options.continuous){aG=aH=true}else{aG=(aI-1)>M.current;aH=M.current>0}}if(M.options.slideshowDelay>0&&M.hasNext()){aL=!M.isPaused();S=!aL}}else{aK=aG=S=aL=aH=false}p("close",aK);p("next",aG);p("play",S);p("pause",aL);p("previous",aH);var K="";if(M.options.displayCounter&&M.gallery.length>1){var aI=M.gallery.length;if(M.options.counterType=="skip"){var aD=0,aC=aI,aB=parseInt(M.options.counterLimit)||0;if(aB<aI&&aB>2){var aF=Math.floor(aB/2);aD=M.current-aF;if(aD<0){aD+=aI}aC=M.current+(aB-aF);if(aC>aI){aC-=aI}}while(aD!=aC){if(aD==aI){aD=0}K+='<a onclick="Shadowbox.change('+aD+');"';if(aD==M.current){K+=' class="sb-counter-current"'}K+=">"+(++aD)+"</a>"}}else{K=[M.current+1,aI].join("/")}}Y("sb-counter").innerHTML=K;aJ()}function P(aC){var K=Y("sb-title-inner"),aB=Y("sb-info-inner"),S=0.35;K.style.visibility=aB.style.visibility="";if(K.innerHTML!=""){I(K,"marginTop",0,S)}I(aB,"marginTop",0,S,aC)}function ap(aB,aH){var aF=Y("sb-title"),K=Y("sb-info"),aC=aF.offsetHeight,aD=K.offsetHeight,aE=Y("sb-title-inner"),aG=Y("sb-info-inner"),S=(aB?0.35:0);I(aE,"marginTop",aC,S);I(aG,"marginTop",aD*-1,S,function(){aE.style.visibility=aG.style.visibility="hidden";aH()})}function X(K,aC,S,aE){var aD=Y("sb-wrapper-inner"),aB=(S?M.options.resizeDuration:0);I(V,"top",aC,aB);I(aD,"height",K,aB,aE)}function am(K,aC,S,aD){var aB=(S?M.options.resizeDuration:0);I(V,"left",aC,aB);I(V,"width",K,aB,aD)}function ae(aH,aB){var aD=Y("sb-body-inner"),aH=parseInt(aH),aB=parseInt(aB),S=V.offsetHeight-aD.offsetHeight,K=V.offsetWidth-aD.offsetWidth,aF=Z.offsetHeight,aG=Z.offsetWidth,aE=parseInt(M.options.viewportPadding)||20,aC=(M.player&&M.options.handleOversize!="drag");return M.setDimensions(aH,aB,aF,aG,S,K,aE,aC)}var O={};O.markup='<div id="sb-container"><div id="sb-overlay"></div><div id="sb-wrapper"><div id="sb-title"><div id="sb-title-inner"></div></div><div id="sb-wrapper-inner"><div id="sb-body"><div id="sb-body-inner"></div><div id="sb-loading"></div></div></div><div id="sb-info"><div id="sb-info-inner"><div id="sb-counter"></div><div id="sb-nav"><a id="sb-nav-close" onclick="Shadowbox.close()"></a><a id="sb-nav-next" onclick="Shadowbox.next()"></a><a id="sb-nav-play" onclick="Shadowbox.play()"></a><a id="sb-nav-pause" onclick="Shadowbox.pause()"></a><a id="sb-nav-previous" onclick="Shadowbox.previous()"></a></div></div></div></div></div>';O.options={animSequence:"sync",counterLimit:10,counterType:"default",displayCounter:true,displayNav:true,fadeDuration:0.35,initialHeight:160,initialWidth:320,modal:false,overlayColor:"#000",overlayOpacity:0.5,resizeDuration:0.35,showOverlay:true,troubleElements:["select","object","embed","canvas"]};O.init=function(){M.appendHTML(document.body,O.markup);O.body=Y("sb-body-inner");W=Y("sb-container");Z=Y("sb-overlay");V=Y("sb-wrapper");if(!u){W.style.position="absolute"}if(!g){var aB,K,S=/url\("(.*\.png)"\)/;aA(o,function(aD,aE){aB=Y(aE);if(aB){K=M.getStyle(aB,"backgroundImage").match(S);if(K){aB.style.backgroundImage="none";aB.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+K[1]+",sizingMethod=scale);"}}})}var aC;C(ao,"resize",function(){if(aC){clearTimeout(aC);aC=null}if(x){aC=setTimeout(O.onWindowResize,10)}})};O.onOpen=function(K,aB){l=false;W.style.display="block";aw();var S=ae(M.options.initialHeight,M.options.initialWidth);X(S.innerHeight,S.top);am(S.width,S.left);if(M.options.showOverlay){Z.style.backgroundColor=M.options.overlayColor;M.setOpacity(Z,0);if(!M.options.modal){C(Z,"click",M.close)}ai=true}if(!u){az();C(ao,"scroll",az)}at();W.style.visibility="visible";if(ai){I(Z,"opacity",M.options.overlayOpacity,M.options.fadeDuration,aB)}else{aB()}};O.onLoad=function(S,K){ac(true);while(O.body.firstChild){z(O.body.firstChild)}ap(S,function(){if(!x){return}if(!S){V.style.visibility="visible"}q(K)})};O.onReady=function(aC){if(!x){return}var S=M.player,aB=ae(S.height,S.width);var K=function(){P(aC)};switch(M.options.animSequence){case"hw":X(aB.innerHeight,aB.top,true,function(){am(aB.width,aB.left,true,K)});break;case"wh":am(aB.width,aB.left,true,function(){X(aB.innerHeight,aB.top,true,K)});break;default:am(aB.width,aB.left,true);X(aB.innerHeight,aB.top,true,K)}};O.onShow=function(K){ac(false,K);l=true};O.onClose=function(){if(!u){H(ao,"scroll",az)}H(Z,"click",M.close);V.style.visibility="hidden";var K=function(){W.style.visibility="hidden";W.style.display="none";at(true)};if(ai){I(Z,"opacity",0,M.options.fadeDuration,K)}else{K()}};O.onPlay=function(){p("play",false);p("pause",true)};O.onPause=function(){p("pause",false);p("play",true)};O.onWindowResize=function(){if(!l){return}aw();var K=M.player,S=ae(K.height,K.width);am(S.width,S.left);X(S.innerHeight,S.top);if(K.onWindowResize){K.onWindowResize()}};M.skin=O;ao.Shadowbox=M})(window);(function(){var e;var d=function(){};var b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var c=b.length;var a=(window.console=window.console||{});while(c--){e=b[c];if(!a[e]){a[e]=d}}}());
/*!
 * JQuery Spliter Plugin
 * Copyright (C) 2010-2013 Jakub Jankiewicz <http://jcubic.pl> 
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 * 
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
(function(e,f){var b=0;var d=null;var a=[];var c=null;e.fn.split=function(v){var l=this.data("splitter");if(l){return l}var p;var o;var k=e.extend({limit:100,orientation:"horizontal",position:"50%",onDragStart:e.noop,onDragEnd:e.noop,onDrag:e.noop},v||{});var u;var j=this.children();if(k.orientation=="vertical"){p=j.first().addClass("left_panel");o=p.next().addClass("right_panel");u="vsplitter"}else{if(k.orientation=="horizontal"){p=j.first().addClass("top_panel");o=p.next().addClass("bottom_panel");u="hsplitter"}}var i=this.width();var q=this.height();var h=b++;this.addClass("splitter_panel");var g=e("<div/>").addClass(u).mouseenter(function(){d=h}).mouseleave(function(){d=null}).insertAfter(p);var m;function t(w){if(typeof w==="number"){return w}else{if(typeof w==="string"){var x=w.match(/^([0-9]+)(px|%)$/);if(x){if(x[2]=="px"){return +x[1]}else{if(k.orientation=="vertical"){return(i*+x[1])/100}else{if(k.orientation=="horizontal"){return(q*+x[1])/100}}}}else{}}else{}}}var r=e.extend(this,{refresh:function(){var w=this.width();var x=this.height();if(i!=w||q!=x){i=this.width();q=this.height();r.position(m)}},position:(function(){if(k.orientation=="vertical"){return function(y,x){if(y===f){return m}else{m=t(y);var w=g.width()/2;g.css("left",m-w);p.width(m-w);o.width(r.width()-m-w)}if(!x){r.find(".splitter_panel").trigger("splitter.resize")}return r}}else{if(k.orientation=="horizontal"){return function(y,x){if(y===f){return m}else{m=t(y);var w=g.height()/2;g.css("top",m-w);p.height(m-w);o.height(r.height()-m-w)}if(!x){r.find(".splitter_panel").trigger("splitter.resize")}return r}}else{return e.noop}}})(),orientation:k.orientation,limit:k.limit,isActive:function(){return d===h},destroy:function(){r.removeClass("splitter_panel");g.unbind("mouseenter");g.unbind("mouseleave");if(k.orientation=="vertical"){p.removeClass("left_panel");o.removeClass("right_panel")}else{if(k.orientation=="horizontal"){p.removeClass("top_panel");o.removeClass("bottom_panel")}}r.unbind("splitter.resize");r.find(".splitter_panel").trigger("splitter.resize");a[h]=null;g.remove();var x=false;for(var w=a.length;w--;){if(a[w]!==null){x=true;break}}if(!x){e(document.documentElement).unbind(".splitter");e(window).unbind("resize.splitter");a=[]}}});r.bind("splitter.resize",function(w){var x=r.position();if(r.orientation=="vertical"&&x>r.width()){x=r.width()-r.limit-1}else{if(r.orientation=="horizontal"&&x>r.height()){x=r.height()-r.limit-1}}if(x<r.limit){x=r.limit+1}r.position(x,true)});var n;if(k.orientation=="vertical"){if(n>i-k.limit){n=i-k.limit}else{n=t(k.position)}}else{if(k.orientation=="horizontal"){if(n>q-k.limit){n=q-k.limit}else{n=t(k.position)}}}if(n<k.limit){n=k.limit}r.position(n,true);if(a.length==0){e(window).bind("resize.splitter",function(){e.each(a,function(w,x){x.refresh()})});e(document.documentElement).bind("mousedown.splitter",function(w){if(d!==null){c=a[d];e('<div class="splitterMask"></div>').insertAfter(c);if(c.orientation=="horizontal"){e("body").css("cursor","row-resize")}else{if(c.orientation=="vertical"){e("body").css("cursor","col-resize")}}k.onDragStart(w);return false}}).bind("mouseup.splitter",function(w){e(".splitterMask").remove();c=null;e("body").css("cursor","auto");k.onDragEnd(w)}).bind("mousemove.splitter",function(A){if(c!==null){var z=c.limit;var B=c.offset();if(c.orientation=="vertical"){var w=A.pageX-B.left;if(w<=c.limit){w=c.limit+1}else{if(w>=c.width()-z){w=c.width()-z-1}}if(w>c.limit&&w<c.width()-z){c.position(w,true);c.find(".splitter_panel").trigger("splitter.resize");return false}}else{if(c.orientation=="horizontal"){var C=A.pageY-B.top;if(C<=c.limit){C=c.limit+1}else{if(C>=c.height()-z){C=c.height()-z-1}}if(C>c.limit&&C<c.height()-z){c.position(C,true);c.trigger("splitter.resize");return false}}}k.onDrag(A)}})}a.push(r);r.data("splitter",r);return r}})(jQuery);
/*!
 * JQuery Confirm Box Plugin
 * http://tutorialzine.com/2010/12/better-confirm-box-jquery-css3/
 *
 */
(function(a){a.confirm=function(f){if(a("#confirmOverlay").length){return false}var e="";a.each(f.buttons,function(g,h){e+='<a href="#" class="button '+h["class"]+' tw-font">'+g+"<span></span></a>";if(!h.action){h.action=function(){}}});var b=['<div id="confirmOverlay">','<div id="confirmBox">','<header class="tw-font header"><h1>',f.title,"</h1></header>","<p>",f.message,"</p>",'<div id="confirmButtons">',e,"</div></div></div>"].join("");a(b).hide().appendTo("body").fadeIn();var d=a("#confirmBox .button"),c=0;a.each(f.buttons,function(g,h){d.eq(c++).click(function(){h.action();a.confirm.hide();return false})})};a.confirm.hide=function(){a("#confirmOverlay").fadeOut(function(){a(this).remove()})}})(jQuery);"use strict";Shadowbox.init();function EventDispatcher(){this.listeners={}}EventDispatcher.prototype={constructor:EventDispatcher,addEventListener:function(a,b){if(typeof this.listeners[a]=="undefined"){this.listeners[a]=[]}this.listeners[a].push(b)},dispatchEvent:function(d){if(!d.target){d.target=this}if(this.listeners[d.type] instanceof Array){var c=this.listeners[d.type];for(var b=0,a=c.length;b<a;b++){c[b](d)}}},removeEventListener:function(d,e){if(this.listeners[d] instanceof Array){var c=this.listeners[d];for(var b=0,a=c.length;b<a;b++){if(c[b]===e){break}}c.splice(b,1)}},hasEventListener:function(b){if(this.listeners[b] instanceof Array){var a=this.listeners[b];return(a.length>0)}return false}};var trace=function(){console.log.apply(console,arguments)};function validateString(a){return(typeof a=="string"&&a.length>0)}function displayString(b,a){if(typeof a!="string"){throw Error("displayString() - strDefault must be a string. ("+a+")")}if(typeof b!="string"||b.length<=0){return a}return b}function s(a){return STRINGS[lang][a]||STRINGS.en_us[a]}var Constants={DISPLAY_SCREEN:"DISPLAY_SCREEN",DISPLAY_EDIT:"DISPLAY_EDIT",ALERT_WARNING:"warning",ALERT_INFORMATION:"information",ALERT_ERROR:"error",ALERT_CONFIRM:"confirm",ALERT_NONE:"none",ASCENDING:"ASCENDING",DESCENDING:"DESCENDING"};var Notifications={SHADOWBOX:"SHADOWBOX",ALERT:"ALERT",CONFIRM:"CONFIRM",MODAL:"MODAL",ADD_RECIPE:"ADD_RECIPE",EDIT_RECIPE:"EDIT_RECIPE",DELETE_RECIPE:"DELETE_RECIPE",PRINT_RECIPE:"PRINT_RECIPE",CANCEL_EDIT:"CANCEL_EDIT",SAVE_EDIT:"SAVE_EDIT",SHOW_ABOUT:"SHOW_ABOUT",CHANGE:"CHANGE",ADD_ING:"ADD_ING",RECIPE_CHANGE:"RECIPE_CHANGE",RECIPE_ADD:"RECIPE_ADD",RECIPE_REMOVE:"RECIPE_REMOVE",SORT_RATING:"SORT_RATING",SORT_LABEL:"SORT_LABEL"};var STRINGS={en_us:{NEED_RECIPE_TITLE:"Please enter a recipe name.",NEED_RECIPE_DIR:"Please enter the recipe directions.",NEED_RECIPE_ING:"Please add at-least one ingredient.",NEED_RECIPE_ING2:"Please enter atleast one ingredient.",NO_RECIPE_FOUND:"No recipes found.",NO_RECIPE_SEL:"No recipes selected.",MULT_RECIPE_SEL:"Multiple recipes selected.",REMOVE_ING:"Remove Ingredient",REMOVE_PIC:"Remove Picture",DELETE_WARN:"You are about to delete recipes: \n\n",COURTESY_OF:"Courtesy of ",COURTESY_UNKNOWN:"Unknown",YIELDS:" - Yields: "}};var lang="en_us";var pxyRecipe=null;var medHeader=null;var medDisplayScreen=null;var medEditScreen=null;var medModal=null;var medModalImage=null;$().ready(function(){init()});function init(){pxyRecipe=new RecipeProxy();pxyRecipe.addEventListener(Notifications.RECIPE_CHANGE,commandHandler);pxyRecipe.addEventListener(Notifications.RECIPE_ADD,commandHandler);pxyRecipe.addEventListener(Notifications.RECIPE_REMOVE,commandHandler);medHeader=new HeaderMediator($(".header"));medHeader.addEventListener(Notifications.ADD_RECIPE,commandHandler);medHeader.addEventListener(Notifications.EDIT_RECIPE,commandHandler);medHeader.addEventListener(Notifications.DELETE_RECIPE,commandHandler);medHeader.addEventListener(Notifications.PRINT_RECIPE,commandHandler);medHeader.addEventListener(Notifications.CANCEL_EDIT,commandHandler);medHeader.addEventListener(Notifications.SAVE_EDIT,commandHandler);medHeader.addEventListener(Notifications.SHOW_ABOUT,commandHandler);medHeader.addEventListener(Notifications.ADD_ING,commandHandler);medDisplayScreen=new DisplayScreenMediator($("#screen-display"));medDisplayScreen.addEventListener(Notifications.CHANGE,commandHandler);medDisplayScreen.addEventListener(Notifications.ALERT,commandHandler);medDisplayScreen.addEventListener(Notifications.CONFIRM,commandHandler);medDisplayScreen.addEventListener(Notifications.SORT_RATING,commandHandler);medDisplayScreen.addEventListener(Notifications.SORT_LABEL,commandHandler);medDisplayScreen.addEventListener(Notifications.MODAL,commandHandler);medDisplayScreen.addEventListener(Notifications.SHADOWBOX,commandHandler);medEditScreen=new EditScreenMediator($("#screen-edit"));medModal=new ModalMediator($(".modalDialog"));medModalImage=new ModalImageMediator($(".modalImage"));medDisplayScreen.updateList(pxyRecipe.getRecipes());medDisplayScreen.selectRecipeAt(0);setScreen(Constants.DISPLAY_SCREEN)}function commandHandler(h){switch(h.type){case Notifications.SHADOWBOX:Shadowbox.clearCache();var d=$(".recipe-detail img");Shadowbox.setup();break;case Notifications.MODAL:trace("main.js::commandHandler() - Image popup");break;case Notifications.ALERT:$.confirm({title:h.body.title,message:h.body.message,buttons:{Ok:{"class":"select",action:function(){}}}});break;case Notifications.CONFIRM:$.confirm({title:h.body.title,message:h.body.message,buttons:{Yes:{"class":"select",action:h.body.callbackYes},No:{"class":"",action:h.body.callbackNo}}});break;case Notifications.ADD_RECIPE:medEditScreen.load(null);medEditScreen.isModified=true;setScreen(Constants.DISPLAY_EDIT);break;case Notifications.EDIT_RECIPE:var e=medDisplayScreen.getNumSelected();if(e===1){var f=medDisplayScreen.getSelectedRecipe();var j=pxyRecipe.getRecipe(f);medEditScreen.load(j);setScreen(Constants.DISPLAY_EDIT)}break;case Notifications.DELETE_RECIPE:var g=s("DELETE_WARN");var b=medDisplayScreen.getSelectedRecipes();for(var c=0,a=b.length;c<a;c++){var j=pxyRecipe.getRecipe(b[c]);g+=j.title+"\n"}commandHandler(new Note(Notifications.CONFIRM,{title:"Delete Confirmation",icon:Constants.ALERT_WARNING,message:g,callbackYes:function(){pxyRecipe.removeRecipes(b)},callbackNo:function(){}}));break;case Notifications.CANCEL_EDIT:if(medEditScreen.isModified){commandHandler(new Note(Notifications.CONFIRM,{title:"Save Confirmation",icon:Constants.ALERT_WARNING,message:"Would you like to save changes?",callbackYes:function(){if(saveRecipe()){setScreen(Constants.DISPLAY_SCREEN)}},callbackNo:function(){setScreen(Constants.DISPLAY_SCREEN)}}))}else{setScreen(Constants.DISPLAY_SCREEN)}break;case Notifications.SAVE_EDIT:if(medEditScreen.isModified){if(saveRecipe()){setScreen(Constants.DISPLAY_SCREEN)}}else{setScreen(Constants.DISPLAY_SCREEN)}break;case Notifications.ADD_ING:medEditScreen.addIngredient();break;case Notifications.CHANGE:var e=medDisplayScreen.getNumSelected();medHeader.updateButtons(e);if(e===1){var f=medDisplayScreen.getSelectedRecipe();var j=pxyRecipe.getRecipe(f);medDisplayScreen.displayRecipe(j)}break;case Notifications.SORT_LABEL:case Notifications.SORT_RATING:if(h.body===Constants.DESCENDING){pxyRecipe.sort(h.type,Constants.DESCENDING)}else{pxyRecipe.sort(h.type,Constants.ASCENDING)}medDisplayScreen.updateList(pxyRecipe.getRecipes());break;case Notifications.DISPLAY_CHANGE:setScreen(h.body);break;case Notifications.RECIPE_CHANGE:medDisplayScreen.displayRecipe(h.body);medDisplayScreen.updateSelected(h.body);break;case Notifications.RECIPE_ADD:medDisplayScreen.updateList(pxyRecipe.getRecipes());medDisplayScreen.selectRecipeById(h.body[0].id);break;case Notifications.RECIPE_REMOVE:medDisplayScreen.updateList(pxyRecipe.getRecipes());medDisplayScreen.selectRecipeAt(0);break}}function saveRecipe(){if(medEditScreen.validate()){var a=medEditScreen.unload();if(!isNaN(a.id)){trace("main.js::saveRecipe() - "+a.id+" recipe saved");pxyRecipe.setRecipe(a.id,a)}else{trace("main.js::saveRecipe() - New recipe saved");pxyRecipe.addRecipes([a])}return true}return false}function setScreen(a){if(typeof a!=="string"){a=Constants.DISPLAY_SCREEN}medHeader.setScreen(a);if(a==Constants.DISPLAY_SCREEN){$("#content").removeClass("screen-edit").addClass("screen-display")}else{$("#content").removeClass("screen-display").addClass("screen-edit")}}function Note(b,a){this.type=b;this.body=a}var Recipe=function(b,k,f,a,c,d,e,l,j,i,h,g){this.id=b>=0?b:NaN;this.title=displayString(k,"");this.author=displayString(f,"");this.source=displayString(a,"");this.category=displayString(c,"");this.yields=displayString(d,"");this.rating=e||0;this.tags=l||[];this.directions=displayString(j,"");this.notes=displayString(i,"");this.ingredients=h||[];this.picture=displayString(g,"");return this};var StarRating=function(b){var a=this;this.source=b?$(b):null;this.setStars=function(d){if(a.source){var e=a.source.find("input:checked");e.prop("checked",false);var c=a.source.find("input[value="+d+"]");c.prop("checked",true)}};this.getStars=function(){if(a.source){var d=a.source.find("input:checked");var c=d.val();console.log(c);return c}return 0};this.reset=function(){a.setStars(1)}};var RecipeProxy=function(){var a=new EventDispatcher();var b=4;var d=[new Recipe(0,"Rainbow Slaw","Jennifer Mariani","Family Recipe","Side Dish","4 Servings",5,null,"Combine the salad, seeds, and fruit. Mix up the dressing (vinegar, canola oil, seasoning, sugar) and pour over the salad. DO NOT ADD the crushed noodles until about an hour ahead of serving time.","Test Note",["2 pkg of rainbow salad or broccoli salad","2 pkg of Ramen noodles (chicken or oriental)","1 can of crushed pineapple (drained)","1 pkg of sunflower seeds (keep leftovers in freezer)","1/3C vinegar","3/4C of canola oil","2 seasoning packs from Ramen noodles","1/2C of sugar"]),new Recipe(1,"ZRainbow Slaw","Jennifer Mariani","","Side Dish","4 Servings",2,null,"Combine the salad, seeds, and fruit. Mix up the dressing (vinegar, canola oil, seasoning, sugar) and pour over the salad. DO NOT ADD the crushed noodles until about an hour ahead of serving time.","",["2 pkg of rainbow salad or broccoli salad","2 pkg of Ramen noodles (chicken or oriental)","1 can of crushed pineapple (drained)","1 pkg of sunflower seeds (keep leftovers in freezer)","1/3C vinegar","3/4C of canola oil","2 seasoning packs from Ramen noodles","1/2C of sugar"],"151679.jpg"),new Recipe(2,"FRainbow Slaw","","Family Recipe","Side Dish","4 Servings",1,null,"Combine the salad, seeds, and fruit. Mix up the dressing (vinegar, canola oil, seasoning, sugar) and pour over the salad. DO NOT ADD the crushed noodles until about an hour ahead of serving time.","",["2 pkg of rainbow salad or broccoli salad","2 pkg of Ramen noodles (chicken or oriental)","1 can of crushed pineapple (drained)","1 pkg of sunflower seeds (keep leftovers in freezer)","1/3C vinegar","3/4C of canola oil","2 seasoning packs from Ramen noodles","1/2C of sugar"]),new Recipe(3,"ARainbow Slaw","Jennifer Mariani","Family Recipe","Side Dish","",3,null,"Combine the salad, seeds, and fruit. Mix up the dressing (vinegar, canola oil, seasoning, sugar) and pour over the salad. DO NOT ADD the crushed noodles until about an hour ahead of serving time.","",["2 pkg of rainbow salad or broccoli salad","2 pkg of Ramen noodles (chicken or oriental)","1 can of crushed pineapple (drained)","1 pkg of sunflower seeds (keep leftovers in freezer)","1/3C vinegar","3/4C of canola oil","2 seasoning packs from Ramen noodles","1/2C of sugar"])];a.sort=function(f,g){if(f===Notifications.SORT_LABEL){if(g===Constants.DESCENDING){d.sort(c);d.reverse()}else{d.sort(c)}}else{if(f===Notifications.SORT_RATING){if(g===Constants.DESCENDING){d.sort(e);d.reverse()}else{d.sort(e)}}}};a.getRecipes=function(){return d};a.getRecipe=function(h){for(var f in d){var g=d[f];if(g.id===h){return g}}return null};a.setRecipe=function(j,h){for(var g=0,f=d.length;g<f;g++){if(d[g].id===j){d[g]=h}}a.dispatchEvent(new Note(Notifications.RECIPE_CHANGE,h))};a.addRecipes=function(f){var h=[];for(var j=0,g=f.length;j<g;j++){var k=f[j];k.id=b++;d.push(k);h.push(k.id)}a.dispatchEvent(new Note(Notifications.RECIPE_ADD,f));return h};a.removeRecipes=function(g){for(var m=0,h=g.length;m<h;m++){for(var k=0,f=d.length;k<f;k++){if(g[m]===d[k].id){d.splice(k,1);break}}}a.dispatchEvent(new Note(Notifications.RECIPE_REMOVE,g))};function e(g,f){var h=g.rating;var i=f.rating;if(h>i){return 1}else{if(h<i){return -1}else{return 0}}}function c(g,f){return(g.title>f.title)-(g.title<f.title)}return a};var HeaderMediator=function(t){var p=new EventDispatcher();var l=t.find("nav");var v=l.find(".nav-button-add");var e=l.find(".nav-button-edit");var h=l.find(".nav-button-delete");var x=l.find(".nav-button-print");var y=l.find(".nav-button-import");var g=l.find(".nav-button-export");var o=l.find(".nav-button-cancel");var j=l.find(".nav-button-save");var m=l.find(".nav-button-add-ing");t.find("#logo").on("click",f);v.on("click",d);e.on("click",q);h.on("click",k);x.on("click",c);y.on("click",a);g.on("click",i);o.on("click",r);j.on("click",w);m.on("click",n);p.setScreen=function(z){if(typeof z!=="string"){z=Constants.DISPLAY_SCREEN}if(z===Constants.DISPLAY_SCREEN){l.removeClass("nav-edit");l.addClass("nav-display")}else{l.removeClass("nav-display");l.addClass("nav-edit")}};p.updateButtons=function(z){if(z<1){b(e);b(h);b(x);b(y);b(g)}else{if(z>1){b(e);b(g)}else{if(z===1){u(e);u(h);u(x);u(y);u(g)}else{b(e);b(h);b(x);b(y);b(g)}}}};function b(z){z.parent().addClass("hidden-w")}function u(z){z.parent().removeClass("hidden-w")}function d(z){p.dispatchEvent(new Note(Notifications.ADD_RECIPE))}function q(z){p.dispatchEvent(new Note(Notifications.EDIT_RECIPE))}function k(z){p.dispatchEvent(new Note(Notifications.DELETE_RECIPE))}function c(z){p.dispatchEvent(new Note(Notifications.PRINT_RECIPE))}function a(z){}function i(z){}function r(z){p.dispatchEvent(new Note(Notifications.CANCEL_EDIT))}function w(z){p.dispatchEvent(new Note(Notifications.SAVE_EDIT))}function f(z){p.dispatchEvent(new Note(Notifications.SHOW_ABOUT))}function n(z){p.dispatchEvent(new Note(Notifications.ADD_ING))}return p};var EditScreenMediator=function(i){var e=i.find(".ingredient-list");var c=i.find("#recipe-name");var a=i.find("#recipe-category");var j=new StarRating("#recipe-rating");var b=i.find("#recipe-author");var n=i.find("#recipe-source");var o=i.find("#recipe-yields");var m=i.find("#recipe-directions");var h=i.find("#recipe-notes");var d=i.find("#recipe-image-browse");var k=i.find("#recipe-image");var g=new EventDispatcher();var l;c.on("change",p);a.on("change",p);b.on("change",p);n.on("change",p);o.on("change",p);m.on("change",p);h.on("change",p);e.on("change",p);e.on("click",f);j.source.on("click",p);if(typeof window.FileReader==="undefined"){}else{k.on("dragenter",function(q){$(this).addClass("hover");q.preventDefault()});k.on("dragover",function(q){q.preventDefault()});k.on("dragleave dragend",function(q){$(this).removeClass("hover");q.preventDefault()});k.on("drop",function(r){$(this).removeClass("hover");r.preventDefault();g.isModified=true;var q=new FileReader();q.onload=function(t){k.css("background-image","url("+t.target.result+") no-repeat center")};q.readAsDataURL(r.originalEvent.dataTransfer.files[0])})}g.reset=function(){e.empty();c.val("");a.val(1);j.setStars(1);b.val("");n.val("");o.val("");m.val("");h.val("");this.isModified=false};g.load=function(t){if(!t){g.reset();l=new Recipe()}else{var u="";for(var r=0,q=t.ingredients.length;r<q;r++){u+='<li><input type="text" value="'+unescape(t.ingredients[r])+'" /><button class="recipe-button-remove ingredient-button-remove" title="'+s("REMOVE_ING")+'">'+s("REMOVE_ING")+"</button></li>"}e.html(u);c.val(t.title);a.val(t.category);j.setStars(t.rating);b.val(t.author);n.val(t.source);o.val(t.yields);m.val(t.directions);h.val(t.notes);l=t}this.isModified=false};g.unload=function(){var q=[];var u=e[0].getElementsByTagName("input");for(var t=0,r=u.length;t<r;t++){var v=u[t].value;if(validateString(v)){q.push(v)}}l.ingredients=q;l.title=c.val();l.category=a.val();l.rating=j.getStars();l.author=b.val();l.source=n.val();l.yields=o.val();l.directions=m.val();l.notes=h.val();return l};g.validate=function(){var q=e[0].getElementsByTagName("input");if(!validateString(c.val())){g.dispatchEvent(new Note(Notifications.ALERT,{title:"Warning",icon:Constants.ALERT_WARNING,message:s("NEED_RECIPE_TITLE")}));return false}if(!validateString(m.val())){g.dispatchEvent(new Note(Notifications.ALERT,{title:"Warning",icon:Constants.ALERT_WARNING,message:s("NEED_RECIPE_DIR")}));return false}if(q.length<=0){g.dispatchEvent(new Note(Notifications.ALERT,{title:"Warning",icon:Constants.ALERT_WARNING,message:s("NEED_RECIPE_ING")}));return false}if(!validateString($(q[0]).val())){g.dispatchEvent(new Note(Notifications.ALERT,{title:"Warning",icon:Constants.ALERT_WARNING,message:s("NEED_RECIPE_ING2")}));return false}return true};g.addIngredient=function(){e.append('<li><input type="text" value="" /><button class="recipe-button-remove ingredient-button-remove" title="'+s("REMOVE_ING")+'">'+s("REMOVE_ING")+"</button></li>")};g.isModified=false;function p(q){g.isModified=true}function f(r){var q=$(r.target);if(q.hasClass("ingredient-button-remove")){var t=q.parent();t.remove();p()}}return g};var DisplayScreenMediator=function(q){var i=true;var t=false;var o=q.find(".recipe-rating");var g=new StarRating(".recipe-rating span");var h=new StarRating(null);var v=q.find("#sortTypeLabel");var A=q.find("#sortStar");var e=q.find("#sortType");var a=q.find(".recipe-list");var r=q.find(".recipe-detail img");var m=q.find(".recipe-detail a");var f="";var z="";var d=q.find("#btnNotes");var y=0;var n=new EventDispatcher();var w=[];A.on("click",x);e.on("click",x);q.find("#btnRandom").on("click",l);a.children().on("click",p);d.on("click",c);r.on("click",k);$("#screen-display").split({orientation:"vertical",limit:125,position:"30%"});n.getSelectedRecipe=function(){return w.length>0?w[0]:null};n.selectRecipeAt=function(C){var D=a.children();D.removeClass("selected");w=[];if(typeof C==="number"){var B=$(D[C]);B.addClass("selected");w.push(B.data("recipe-id"))}j()};n.selectRecipeById=function(D){var C=a.children();C.removeClass("selected");w=[];var B=a.find("li[data-recipe-id='"+D+"']");if(B){B.addClass("selected");w.push(B.data("recipe-id"))}j()};n.getSelectedRecipes=function(){return w};n.getNumSelected=function(){return w.length};n.displayRecipe=function(G){if(validateString(G.notes)){d.removeClass("hidden-h")}else{d.addClass("hidden-h")}var F;var D=$("#recipe");D.find("h1").text(G.title);F=s("COURTESY_OF")+displayString(G.author,s("COURTESY_UNKNOWN"));if(validateString(G.source)){F+=" ("+G.source+")"}D.find("h2").text(F);F=G.category;if(validateString(G.yields)){F+=s("YIELDS")+G.yields}D.find("h3").text(F);g.setStars(G.rating);var E="";for(var C=0,B=G.ingredients.length;C<B;C++){E+="<li>"+unescape(G.ingredients[C])+"</li>"}D.children("ul").html(E);f=displayString(G.notes,"");if(G.picture!=""&&G.picture){z=G.picture;m.attr("href","img/recipes/"+G.picture);r.attr("src","img/recipes/"+G.picture);r.removeClass("hidden-h");D.removeClass("no-image")}else{z="";r.addClass("hidden-h");D.addClass("no-image")}D.children("p").text(G.directions);n.dispatchEvent(new Note(Notifications.SHADOWBOX))};n.updateList=function(F){var C="";for(var D=0,B=F.length;D<B;D++){var E=F[D];C+='<li data-recipe-id="'+E.id+'">';C+='<span class="rating">';C+='	<input type="radio" disabled="true" class="rating-input" id="rating-input-'+D+'-5" name="rating-input-'+D+'" value="5"'+(E.rating==5?' checked="checked"':"")+">";C+='	<label for="rating-input-'+D+'-5" class="rating-star"></label>';C+='	<input type="radio" disabled="true" class="rating-input" id="rating-input-'+D+'-4" name="rating-input-'+D+'" value="4"'+(E.rating==4?' checked="checked"':"")+">";C+='	<label for="rating-input-'+D+'-4" class="rating-star"></label>';C+='	<input type="radio" disabled="true" class="rating-input" id="rating-input-'+D+'-3" name="rating-input-'+D+'" value="3"'+(E.rating==3?' checked="checked"':"")+">";C+='	<label for="rating-input-'+D+'-3" class="rating-star"></label>';C+='	<input type="radio" disabled="true" class="rating-input" id="rating-input-'+D+'-2" name="rating-input-'+D+'" value="2"'+(E.rating==2?' checked="checked"':"")+">";C+='	<label for="rating-input-'+D+'-2" class="rating-star"></label>';C+='	<input type="radio" disabled="true" class="rating-input" id="rating-input-'+D+'-1" name="rating-input-'+D+'" value="1"'+(E.rating==1?' checked="checked"':"")+">";C+='	<label for="rating-input-'+D+'-1" class="rating-star"></label>';C+="</span>";C+="<p>"+E.title+"</p>";C+="</li>"}a.children().off("click",p);a.html(C);a.children().on("click",p)};n.updateSelected=function(C){var B=$(a.find("li.selected")[0]);h.source=B.find(".rating");h.setStars(C.rating);B.find("p").text(C.title)};function c(B){n.dispatchEvent(new Note(Notifications.ALERT,{title:"Notes",icon:Constants.ALERT_INFORMATION,message:f}))}function k(B){n.dispatchEvent(new Note(Notifications.MODAL,z))}function x(B){b()}function p(B){if(!B.shiftKey){a.children().removeClass("selected");w=[]}$(this).addClass("selected");w.push($(this).data("recipe-id"));j()}function l(){var C=a.children(),D=C.length,B=null;if(D>0){B=parseInt(D*Math.random());if(B==D){B=D-1}if(B<0){B=0}}n.selectRecipeAt(B)}function b(){i=e.is(":checked");t=A.is(":checked");if(i){if(t){v.text("1-5")}else{v.text("A-Z")}}else{if(t){v.text("5-1")}else{v.text("Z-A")}}if(i){if(t){n.dispatchEvent(new Note(Notifications.SORT_RATING,Constants.ASCENDING))}else{n.dispatchEvent(new Note(Notifications.SORT_LABEL,Constants.ASCENDING))}}else{if(t){n.dispatchEvent(new Note(Notifications.SORT_RATING,Constants.DESCENDING))}else{n.dispatchEvent(new Note(Notifications.SORT_LABEL,Constants.DESCENDING))}}}function u(C){d.addClass("hidden-h");r.addClass("hidden-h");var B=$("#recipe");B.find("h1").text(C);B.find("h2").text("");B.find("h3").text("");B.children("ul").html("");B.children("p").text("");g.setStars(0)}function j(){var B=0;var D=n.getSelectedRecipes();y=D.length;var C=false;if(y<1){d.addClass("hidden-h");o.addClass("hidden-h");u(((C==true)?s("NO_RECIPE_FOUND"):s("NO_RECIPE_SEL")))}else{if(y>1){d.addClass("hidden-h");o.addClass("hidden-h");u(s("MULT_RECIPE_SEL"))}else{o.removeClass("hidden-h");d.removeClass("hidden-h");r.removeClass("hidden-h")}}n.dispatchEvent(new Note(Notifications.CHANGE))}return n};var ModalMediator=function(d){var c=new EventDispatcher();var f=d.find("h1");var b=d.find("#modal-content");var a=d.find("#modal-icon");var g=d.find(".close");g.on("click",e);c.init=function(h){f.text(h.title);b.html(h.message);a.removeClass();if(h.icon!==Constants.ALERT_WARNING&&h.icon!==Constants.ALERT_NONE&&h.icon!==Constants.ALERT_INFORMATION&&h.icon!==Constants.ALERT_ERROR){h.icon=Constants.ALERT_INFORMATION}a.addClass(h.icon)};c.open=function(){d.addClass("open")};c.close=function(){d.removeClass("open")};function e(h){c.close()}return c};var ModalImageMediator=function(c){var b=new EventDispatcher();var a=c.find("div > div");var e=c.find(".close");e.on("click",d);b.init=function(f){a.html("<img src='img/recipes/"+f+"'>")};b.open=function(){c.addClass("open")};b.close=function(){c.removeClass("open")};function d(f){b.close()}return b};